[
  {
    "id": "eval-01-field-resolver",
    "name": "Simple Field Resolver",
    "skills": ["viaduct"],
    "query": "Add a computed field memberCount to the Group type that returns the number of members in the group.",
    "files": ["backend/src/main/viaduct/schema/Group.graphqls"],
    "expected_behavior": [
      "Adds 'memberCount: Int! @resolver' to the Group type in schema",
      "Creates resolver class extending GroupResolvers.MemberCount()",
      "Uses @Resolver annotation with objectValueFragment to specify required parent fields",
      "Accesses parent data via ctx.objectValue",
      "Does NOT set memberCount in the Group node resolver (field resolvers handle their own fields)"
    ]
  },
  {
    "id": "eval-02-node-resolver",
    "name": "Node Type and Query Resolver",
    "skills": ["viaduct"],
    "query": "Create a new Tag entity with id, name, color, and createdAt fields that can be fetched by GlobalID.",
    "files": [],
    "expected_behavior": [
      "Creates Tag.graphqls with 'type Tag implements Node @scope(to: [\"default\"])'",
      "Includes 'id: ID!' field for Node interface",
      "Creates query field 'tag(id: ID! @idOf(type: \"Tag\")): Tag @resolver'",
      "Uses @idOf directive on the ID argument",
      "Creates TagQueryResolver extending QueryResolvers.Tag()",
      "Uses ctx.arguments.id.internalID to get the UUID for database lookup",
      "Uses ctx.globalIDFor(Tag.Reflection, id) when building response"
    ]
  },
  {
    "id": "eval-03-required-selection-set",
    "name": "Field Resolver with Required Selection Set",
    "skills": ["viaduct"],
    "query": "Add a displayName field to GroupMember that looks up the user's name based on the userId field.",
    "files": ["backend/src/main/viaduct/schema/Group.graphqls"],
    "expected_behavior": [
      "Adds 'displayName: String @resolver' to GroupMember type",
      "Creates resolver with @Resolver(objectValueFragment = \"fragment _ on GroupMember { userId }\")",
      "Extends GroupMemberResolvers.DisplayName()",
      "Accesses userId via ctx.objectValue.getUserId()",
      "Does NOT try to access fields not declared in the objectValueFragment"
    ]
  },
  {
    "id": "eval-04-batch-resolution",
    "name": "Batch Resolution for N+1 Prevention",
    "skills": ["viaduct"],
    "query": "Add a tags field to Group that returns all tags associated with the group, using batch resolution to prevent N+1 queries.",
    "files": ["backend/src/main/viaduct/schema/Group.graphqls"],
    "expected_behavior": [
      "Adds 'tags: [Tag!]! @resolver' to Group type",
      "Creates GroupTagsResolver extending GroupResolvers.Tags()",
      "Implements batchResolve(contexts: List<Context>): List<FieldValue<List<Tag>>>",
      "Collects all group IDs from contexts in single pass",
      "Makes single database query for all groups' tags",
      "Maps results back to contexts preserving order",
      "Uses FieldValue.ofValue() for successful results"
    ]
  },
  {
    "id": "eval-05-mutations-globalid",
    "name": "Mutations with GlobalID Handling",
    "skills": ["viaduct"],
    "query": "Create CRUD mutations for Tag: createTag, updateTag, and deleteTag. The update and delete operations should accept a Tag GlobalID.",
    "files": [],
    "expected_behavior": [
      "Creates CreateTagInput without @idOf (new entity, no ID yet)",
      "Creates UpdateTagInput with 'id: ID! @idOf(type: \"Tag\")'",
      "Creates deleteTag mutation with 'id: ID! @idOf(type: \"Tag\")' argument",
      "Mutation resolvers extend MutationResolvers.CreateTag(), etc.",
      "Uses input.id.internalID to extract UUID (NOT manual Base64 decoding)",
      "Uses ctx.globalIDFor(Tag.Reflection, id) when returning created/updated Tag",
      "All inputs have @scope(to: [\"default\"])"
    ]
  },
  {
    "id": "eval-06-scopes",
    "name": "Scope-based API Visibility",
    "skills": ["viaduct"],
    "query": "Add admin-only fields to Tag (internalNotes, usageCount) and an admin-only deleteAllTags mutation.",
    "files": ["backend/src/main/viaduct/schema/Tag.graphqls"],
    "expected_behavior": [
      "Uses 'extend type Tag @scope(to: [\"admin\"])' for admin fields",
      "Admin fields are separate from default-scoped fields",
      "Creates 'extend type Mutation @scope(to: [\"admin\"])' for admin mutations",
      "Field resolvers for admin fields work the same as default-scoped ones",
      "Does NOT mix admin and default scopes in same type block"
    ]
  },
  {
    "id": "eval-07-entity-relationships",
    "name": "Entity Relationships with Node References",
    "skills": ["viaduct"],
    "query": "Add a createdBy field to Tag that returns the User who created it, using the node reference pattern.",
    "files": ["backend/src/main/viaduct/schema/Tag.graphqls"],
    "expected_behavior": [
      "Adds 'createdById: String!' to store the raw user ID",
      "Adds 'createdBy: User @resolver' for the relationship",
      "Verifies User type implements Node (required for ctx.nodeFor())",
      "Creates TagCreatedByResolver with objectValueFragment including createdById",
      "Returns ctx.nodeFor(ctx.globalIDFor(User.Reflection, createdById))",
      "Does NOT fetch user data directly - delegates to User's node resolver"
    ]
  }
]
